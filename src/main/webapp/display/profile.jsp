<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
	<%@ page import="java.sql.*" %>
	<%@ page import="java.lang.*" %>
	<%@ page import="dao.operation.RegisterProcess" %>
<%
	if (session == null || session.getAttribute("username") == null) {
		response.sendRedirect(request.getContextPath() + "/index.jsp");
		return;
	}
	ResultSet rs = null;
	String name = "Not available";
    String email = "Not available";
	String username = (String) session.getAttribute("username");;
	 try {
	        RegisterProcess rgp = new RegisterProcess();
	        rs = rgp.getUserDetails(username);
	        if (rs != null && rs.next()) {
	            name = rs.getString("name").length()>0 ? rs.getString("name") : "Not available";
	            email = rs.getString("email");
	        } else {
	            out.println("No user details found.");
	        }
	    } catch (Exception e) {
	        e.printStackTrace();
	        out.println("An error occurred: " + e.getMessage());
	    }
	%>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile Page</title>
<style>
* {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

body {
	background-color: #000;
	color: #fff;
	height: 100vh;
	background-image:
		url("https://img.freepik.com/free-vector/white-digital-matrix-binary-code-numbers-background_1017-25332.jpg?t=st=1717905535~exp=1717909135~hmac=b6bed76da2a22effdcbcb89dfaf815f19763bd954bfb38233255696ae420a143&w=996");
	
	/*background-image:
		url("https://source.unsplash.com/random/?night");*/
	
	/* display: flex; */
	background-repeat: no-repeat;
	background-position: center;
	background-size: cover;
	flex-direction: column;
	margin: 0;
	font: normal 75% Arial, Helvetica, sans-serif;
}
}

.container {
	max-width: 500px;
	margin: 0 auto;
	padding: 20px;
}

/* Profile Container */
.profile-container {
	background-color: #fff;
	border-radius: 10px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
	padding: 30px;
	margin-top: 20px;
	text-align: center;
}

.profile-container h1 {
	font-size: 24px;
	margin-bottom: 20px;
}

.profile-details p {
	font-size: 16px;
	color: #333;
	margin-bottom: 10px;
}

.profile-details strong {
	color: #000;
}

.profile-actions button {
	margin-top: 20px;
	padding: 10px 20px;
	border: none;
	background-color: #007bff;
	color: #fff;
	cursor: pointer;
	border-radius: 5px;
	font-size: 16px;
	transition: background-color 0.3s ease;
}

.profile-actions button:hover {
	background-color: #0056b3;
}

.profile-actions button:focus {
	outline: none;
	box-shadow: 0 0 0 3px rgba(38, 143, 255, 0.5);
}
</style>
</head>
<body>
	<!-- Include Navigation Page -->
	<%@ include file="/WEB-INF/include/navbar.jsp" %>
	
	<div class="container">
		<div class="profile-container">
			<h1>Profile Page</h1>
			<div class="profile-details">
				<p><strong>Name:</strong><%=name%></p>
				<p><strong>Email:</strong><%=email%></p>
				<p><strong>User Name:</strong><%=username%></p>
			</div>
			<div class="profile-actions">
				<button onclick="location.href='change-password.jsp'">Change
					Password</button>
				<button onclick="logout()">Logout</button>
			</div>
		</div>
	</div>
	
	<!-- Include Footer Page -->
	<%@ include file="/WEB-INF/include/footer.jsp" %>
	
	<script>
    function logout() {
        window.location.href = '<%=request.getContextPath()%>/accounts/logout.jsp';
		}
	</script>
</body>
</html>
