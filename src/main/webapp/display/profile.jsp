<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ page import="java.sql.*"%>
<%@ page import="java.lang.*"%>
<%@ page import="dao.operation.RegisterProcess"%>
<%
if (session == null || session.getAttribute("username") == null) {
	response.sendRedirect(request.getContextPath() + "/index.jsp");
	return;
}
ResultSet rs = null;
String name = "Not available";
String email = "Not available";
String mobile = "+91 XXXXXXXXX";
String username = (String) session.getAttribute("username");;
try {
	RegisterProcess rgp = new RegisterProcess();
	rs = rgp.getUserDetails(username);
	if (rs != null && rs.next()) {
		name = rs.getString("name").length() > 0 ? rs.getString("name") : "Not available";
		email = rs.getString("email");
	} else {
		out.println("No user details found.");
	}
} catch (Exception e) {
	e.printStackTrace();
	out.println("An error occurred: " + e.getMessage());
}
%>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile Page</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<style>
* {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

*:focus {
	outline: none;
}

body {
	font-family: 'Arial', sans-serif;
	height: 100vh;
	margin: 0;
	background-color: #f8f9fa;
}

.container {
	display: flex;
	justify-content: center;
	align-items: center;
	width: 100%;
}

.profile-card {
	width: 59%;
	padding: 45px;
	border-radius: 8px;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	background-color: #fff;
}

.profile-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 25px;
}

.profile-icon {
	display: flex;
	align-items: center;
}

.profile-icon i {
	font-size: 40px;
	margin-right: 20px;
}

.profile-icon h1 {
	font-size: 24px;
	margin: 0;
}

.delete-account {
	display: flex;
	align-items: center;
	color: #e53935;
	cursor: pointer;
}

.delete-account i {
	margin-right: 5px;
}

.profile-body {
	margin: 10px 20px 25px 30px;
}

.profile-row {
	display: flex;
	justify-content: space-between;
	margin-bottom: 30px;
}

.profile-field {
	display: flex;
	flex-direction: column;
	width: 45%;
}

.profile-field label {
	font-size: 17px;
	font-weight: bold;
	margin-bottom: 5px;
	text-align: left;
	margin-left: 6px;
}

.profile-field input {
	border: none;
	background: none;
	font-size: 16px;
	padding: 10px;
	color: #333;
	border-bottom: 1px solid #ccc;
	width: 80%;
}

.profile-footer {
	display: flex;
	justify-content: space-between;
	margin-top: 6px;
	padding: 20px;
}

button {
	padding: 10px 20px;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 19px;
}

.edit-button {
	background-color: #007bff;
	color: white;
}

.logout-button {
	background-color: #e53935;
	color: white;
}
</style>
</head>
<body>
	<!-- Include Navigation Page -->
	<%@ include file="/WEB-INF/include/navbar.jsp"%>

	<div class="container">
		<div class="profile-card">
			<div class="profile-header">
				<div class="profile-icon">
					<a href="#" class="icon"><i class="far fa-user-circle"></i></a>
					<h1>My Profile</h1>
				</div>
				<div class="delete-account">
					<i class="fas fa-trash-alt"></i> <span>Delete Account</span>
				</div>
			</div>
			<div class="profile-body">
				<div class="profile-row">
					<div class="profile-field">
						<label>USERNAME</label> <input type="text" value="<%= username %>" readonly>
					</div>
					<div class="profile-field">
						<label>FULL NAME</label> <input type="text" value="<%= name %>" readonly>
					</div>
				</div>
				<div class="profile-row">
					<div class="profile-field">
						<label>Email</label> <input type="text" value="<%= email %>" readonly>
					</div>
					<div class="profile-field">
						<label>Mobile Number</label> <input type="text" value="<%= mobile %> " readonly>
					</div>
				</div>
			</div>
			<div class="profile-footer">
				<button class="edit-button">Edit Profile</button>
				<button onclick="logout()" class="logout-button">Log Out</button>
			</div>
		</div>
	</div>

	<!-- Include Footer Page -->
	<%@ include file="/WEB-INF/include/footer.jsp"%>
	
	<script>
    function logout() {
        window.location.href = '<%=request.getContextPath()%>/accounts/logout.jsp';
		}
	</script>
</body>
</html>
